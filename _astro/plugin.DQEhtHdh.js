import{I as O}from"./webfontloader.QfD90YS_.js";import{p}from"./PhaserGame.astro_astro_type_script_index_0_lang._ApvJukS.js";import{C as d,g as D,c as G,P as T,b as L,e as F,d as $}from"./scene-with-phaser-wind.CawGq48Q.js";const x=g=>g.pw;class W extends p.GameObjects.Container{backgroundGraphics;child;pw;marginPx;borderRadiusPx;backgroundColorValue;hasExplicitSize=!1;constructor({scene:t,x:e,y:s,backgroundColor:i="white",borderRadius:r="md",margin:n="4",child:a,width:o,height:h}){super(t,e,s),this.pw=x(t),this.marginPx=typeof n=="number"?n:this.pw.spacing.px(n??"4"),this.borderRadiusPx=typeof r=="number"?r:this.pw.radius.px(r??"md"),this.backgroundColorValue=d.rgb(i),this.child=a,this.hasExplicitSize=o!==void 0&&h!==void 0,this.createBackgroundGraphics(t,o,h),this.setupContainer()}setSize(t,e){return this.hasExplicitSize=!0,this.width=t,this.height=e,this.drawBackground(t,e),this}setWidth(t){return this.setSize(t,this.height),this}setHeight(t){return this.setSize(this.width,t),this}setBackgroundColor(t){return this.backgroundColorValue=d.rgb(t),this.drawBackground(),this}setBorderRadius(t){return this.borderRadiusPx=typeof t=="number"?t:this.pw.radius.px(t??"md"),this.drawBackground(),this}setMargin(t){return this.marginPx=typeof t=="number"?t:this.pw.spacing.px(t??"4"),this.layout(),this}setChild(t){return this.child&&this.remove(this.child),this.child=t,this.layout(),this}createBackgroundGraphics(t,e,s){this.backgroundGraphics=t.add.graphics(),this.drawBackground(e,s)}setupContainer(){this.add([this.backgroundGraphics]),this.child&&this.add([this.child]),this.hasExplicitSize||this.layout()}layout(){if(!this.child)return;const t=this.child.getBounds(),e=t.width+this.marginPx*2,s=t.height+this.marginPx*2,i=this.getChildOrigin(),r=this.calculateChildX(e,t.width,i),n=this.calculateChildY(s,t.height,i);this.width=e,this.height=s,this.drawBackground(e,s),this.child.setPosition(r,n)}getChildOrigin(){if(this.child&&"originX"in this.child&&"originY"in this.child)return{x:this.child.originX,y:this.child.originY};if(this.child&&typeof this.child.getOrigin=="function"){const t=this.child.getOrigin();if(t&&typeof t.x=="number"&&typeof t.y=="number")return{x:t.x,y:t.y}}return null}calculateChildX(t,e,s){if(this.child&&s){const i=e*s.x;return-t/2+this.marginPx+i}else return-t/2+this.marginPx}calculateChildY(t,e,s){if(s){const i=e*s.y;return-t/2+this.marginPx+i}else return-t/2+this.marginPx}measureChild(t){const e=D(t),s=G(t);return{w:e,h:s}}drawBackground(t,e){let[s,i]=[0,0];if(t&&e)s=t,i=e;else if(this.child){const{w:h,h:c}=this.measureChild(this.child);s=h+this.marginPx*2,i=c+this.marginPx*2}else s=this.width,i=this.height;this.width=s,this.height=i,this.backgroundGraphics.clear();const r=Math.min(s/2,i/2),n=Math.min(this.borderRadiusPx,r),a=-s/2,o=-i/2;this.backgroundGraphics.fillStyle(d.hex(this.backgroundColorValue),1),this.backgroundGraphics.fillRoundedRect(a,o,s,i,n)}}const N="spinner",Y="blue",U=2,X=1e3;class Pt extends p.GameObjects.Container{iconText;pw;rotationSpeed;isSpinning=!0;constructor({scene:t,x:e,y:s,icon:i=N,size:r,color:n=Y,rotationsPerSecond:a=U}){super(t,e,s),this.pw=x(t),this.rotationSpeed=a;const o=typeof r=="number"?r:this.pw.fontSize.px(r??"md");this.createIconText(t,i,o,n),this.setupContainer(),this.startSpinning()}start(){return this.isSpinning||(this.isSpinning=!0,this.startSpinning()),this}stop(){return this.isSpinning=!1,this.scene.tweens.killTweensOf(this.iconText),this}setRotationsPerSecond(t){return this.rotationSpeed=t,this.isSpinning&&(this.scene.tweens.killTweensOf(this.iconText),this.startSpinning()),this}setIcon(t){return this.iconText.setIcon(t),this}setColor(t){return this.iconText.setStyle({color:this.pw.color.rgb(t)}),this}setSize(t){const e=typeof t=="number"?t:this.pw.fontSize.px(t);return this.iconText.setFontSize(`${e}px`),this}get spinning(){return this.isSpinning}createIconText(t,e,s,i){let r;i==="black"||i==="white"||i.includes("-")?r=i:r=`${i}-500`,this.iconText=new O({scene:t,x:0,y:0,icon:e,size:s,style:{color:this.pw.color.rgb(r)}}),this.iconText.setOrigin(.5,.5)}setupContainer(){this.add([this.iconText])}startSpinning(){if(!this.isSpinning)return;const t=X/this.rotationSpeed;this.scene.tweens.add({targets:this.iconText,rotation:Math.PI*2,duration:t,ease:"Linear",repeat:-1,onComplete:()=>{this.iconText.rotation=0}})}destroy(){this.stop(),super.destroy()}}const I={click:100},K=2,b=2.2,_=1.1;class j extends p.GameObjects.Container{backgroundSprite;iconText;pw;baseSizePx;borderRadiusPx;backgroundColorValue;iconColorValue;backgroundOpacityValue=1;iconOpacityValue=1;constructor({scene:t,x:e,y:s,icon:i,iconStyle:r="solid",size:n,backgroundColor:a="gray-600",iconColor:o="white",onClick:h,borderRadius:c="md",backgroundOpacity:u=1,iconOpacity:l=1}){super(t,e,s),this.pw=x(t),this.baseSizePx=typeof n=="number"?n:this.pw.fontSize.px(n??"md"),this.updateSize(),this.borderRadiusPx=typeof c=="number"?c:this.pw.radius.px(c??"md"),this.backgroundColorValue=d.rgb(a),this.iconColorValue=d.rgb(o),this.backgroundOpacityValue=u,this.iconOpacityValue=l,this.createBackgroundSprite(t),this.createIconText(t,i,r),this.setupContainer(),this.setupInteractivity(h)}setBackgroundColor(t){return this.backgroundColorValue=d.rgb(t),this.regenerateBackgroundTexture(),this}setIconColor(t){return this.iconColorValue=d.rgb(t),this.iconText.setColor(this.iconColorValue),this.iconText.setAlpha(this.iconOpacityValue),this}setBackgroundOpacity(t){return this.backgroundOpacityValue=Math.max(0,Math.min(1,t)),this.backgroundSprite.setAlpha(this.backgroundOpacityValue),this}setIconOpacity(t){return this.iconOpacityValue=Math.max(0,Math.min(1,t)),this.iconText.setAlpha(this.iconOpacityValue),this}setBorderRadius(t){const e=typeof t=="number"?t:this.pw.radius.px(t);return this.borderRadiusPx===e?this:(this.borderRadiusPx=e,this.regenerateBackgroundTexture(),this)}setIcon(t,e){return this.iconText.setIcon(t,e),this}setButtonSize(t){return this.baseSizePx=typeof t=="number"?t:this.pw.fontSize.px(t??"md"),this.iconText.setFontSize(`${this.baseSizePx}px`),this.updateSize(),this.regenerateBackgroundTexture(),this}updateSize(){this.width=this.baseSizePx*b,this.height=this.baseSizePx*b}createBackgroundSprite(t){const e=this.createBackgroundTexture(t);this.backgroundSprite=t.add.sprite(0,0,e),this.backgroundSprite.setOrigin(.5,.5),this.backgroundSprite.setAlpha(this.backgroundOpacityValue)}regenerateBackgroundTexture(){const t=this.createBackgroundTexture(this.scene);this.backgroundSprite.setTexture(t),this.backgroundSprite.setAlpha(this.backgroundOpacityValue)}createBackgroundTexture(t){const e=this.baseSizePx,s=`flatIconButton_${this.backgroundColorValue}_${this.borderRadiusPx}_${e}`,i=e*b,r=e*_,n=e*_,a=t.add.graphics();a.fillStyle(d.hex(this.backgroundColorValue),1);const o=e*2,h=Math.min(this.borderRadiusPx,o/2);return a.fillRoundedRect(r-o/2,n-o/2,o,o,h),a.generateTexture(s,i,i),a.destroy(),s}createIconText(t,e,s){this.iconText=new O({scene:t,x:0,y:0,icon:e,size:this.baseSizePx,style:{color:this.iconColorValue,strokeThickness:0},iconStyle:s}),this.iconText.setAlpha(this.iconOpacityValue),this.iconText.setOrigin(.5,.5)}setupContainer(){this.add([this.backgroundSprite,this.iconText])}setupInteractivity(t){this.backgroundSprite.setInteractive({useHandCursor:!0}),this.backgroundSprite.on("pointerdown",()=>{this.scene.tweens.add({targets:[this.backgroundSprite,this.iconText],y:K,duration:I.click,ease:"Linear"})}),this.backgroundSprite.on("pointerup",()=>{this.scene.tweens.add({targets:[this.backgroundSprite,this.iconText],y:0,duration:I.click,ease:"Linear"}),t?.()})}get interactive(){const{on:t,off:e,setInteractive:s,once:i}=this.backgroundSprite;return{on:t.bind(this.backgroundSprite),off:e.bind(this.backgroundSprite),setInteractive:s.bind(this.backgroundSprite),once:i.bind(this.backgroundSprite)}}getBounds(t){const e=this.baseSizePx*b,s=this.baseSizePx*b;return t?t.setTo(this.x-e/2,this.y-s/2,e,s):new Phaser.Geom.Rectangle(this.x-e/2,this.y-s/2,e,s)}}const k={click:100,hover:150},P=2.2,f=1.1,Z=4,q=.1,J=.9,Q=.7,tt=1.07,V=2,et=.9,st=.7;class wt extends p.GameObjects.Container{backgroundSprite;shadowSprite;iconText;pw;baseColor;sizePx;borderRadiusPx;constructor({scene:t,x:e,y:s,icon:i,size:r,color:n,onClick:a,borderRadius:o}){super(t,e,s),this.pw=x(t);const h=typeof r=="number"?r:this.pw.fontSize.px(r??"md"),c=n??"gray";this.sizePx=h,this.updateSize(),this.baseColor=c,this.borderRadiusPx=typeof o=="number"?o:this.pw.radius.px(o??"full"),this.createShadowSprite(t,h,c,this.borderRadiusPx),this.createBackgroundSprite(t,h,c,this.borderRadiusPx),this.createIconText(t,i,h,c),this.setupContainer(),this.setupInteractivity(a)}setBorderRadius(t){const e=typeof t=="number"?t:this.pw.radius.px(t);if(this.borderRadiusPx===e)return this;this.borderRadiusPx=e;const s=this.createShadowTexture(this.scene,this.sizePx,this.baseColor,this.borderRadiusPx),i=this.createBackgroundTexture(this.scene,this.sizePx,this.baseColor,this.borderRadiusPx);return this.shadowSprite.setTexture(s),this.backgroundSprite.setTexture(i),this}setButtonSize(t){this.sizePx=typeof t=="number"?t:this.pw.fontSize.px(t??"md"),this.iconText.setFontSize(`${this.sizePx}px`),this.updateSize();const e=this.createShadowTexture(this.scene,this.sizePx,this.baseColor,this.borderRadiusPx),s=this.createBackgroundTexture(this.scene,this.sizePx,this.baseColor,this.borderRadiusPx);return this.shadowSprite.setTexture(e),this.backgroundSprite.setTexture(s),this}createShadowSprite(t,e,s,i){const r=this.createShadowTexture(t,e,s,i);this.shadowSprite=t.add.sprite(1,Z,r),this.shadowSprite.setOrigin(.5,.5)}createShadowTexture(t,e,s,i){const r=`iconButton_shadow_r${i}_${s}_${e}`,n=e*P,a=e*f,o=e*f,h=t.add.graphics(),c=e*2*f,u=e*2,l=Math.min(i,c/2),S=Math.min(i,u/2);return h.fillStyle(d.hex("black"),q),h.fillRoundedRect(a+1-c/2,o-c/2,c,c,l),h.fillStyle(d.hex(`${s}-900`),J),h.fillRoundedRect(a-u/2,o-V-u/2,u,u,S),h.generateTexture(r,n,n),h.destroy(),r}updateSize(){this.setSize(this.sizePx*P,this.sizePx*P)}createBackgroundSprite(t,e,s,i){const r=this.createBackgroundTexture(t,e,s,i);this.backgroundSprite=t.add.sprite(1,0,r),this.backgroundSprite.setOrigin(.5,.5)}createBackgroundTexture(t,e,s,i){const r=`iconButton_r${i}_${s}_${e}`,n=e*P,a=e*f,o=e*f,h=t.add.graphics(),c=e*2,u=c*et,l=c*st,S=Math.min(i,u/2),m=Math.min(i,l/2);return h.fillStyle(d.hex(`${s}-600`),1),h.fillRoundedRect(a-u/2,o-u/2,u,u,S),h.fillStyle(d.hex(`${s}-500`),Q),h.fillRoundedRect(a-l/2,o-l/2,l,l,m),h.generateTexture(r,n,n),h.destroy(),r}createIconText(t,e,s,i){this.iconText=new O({scene:t,x:1,y:1,icon:e,size:s,style:{color:d.rgb("white"),strokeThickness:3,stroke:d.rgb(`${i}-900`)}}),this.iconText.setFontStyle("900"),this.iconText.setOrigin(.5,.5)}setupContainer(){this.add([this.shadowSprite,this.backgroundSprite,this.iconText])}setupInteractivity(t){this.backgroundSprite.setInteractive({useHandCursor:!0}),this.backgroundSprite.on("pointerover",()=>{this.scene.tweens.add({targets:this.iconText,scale:tt,duration:k.hover,ease:"Linear"})}),this.backgroundSprite.on("pointerout",()=>{this.scene.tweens.add({targets:this.iconText,scale:1,duration:k.hover,ease:"Linear"})}),this.backgroundSprite.on("pointerdown",()=>{this.scene.tweens.add({targets:[this.backgroundSprite,this.iconText],y:V,duration:k.click,ease:"Linear"})}),this.backgroundSprite.on("pointerup",()=>{this.scene.tweens.add({targets:[this.backgroundSprite,this.iconText],y:0,duration:k.click,ease:"Linear"}),t?.()})}get interactive(){const{on:t,off:e,setInteractive:s,once:i}=this.backgroundSprite;return{on:t.bind(this.backgroundSprite),off:e.bind(this.backgroundSprite),setInteractive:s.bind(this.backgroundSprite),once:i.bind(this.backgroundSprite)}}getBounds(t){const e=this.shadowSprite.displayWidth??this.shadowSprite.width,s=this.shadowSprite.displayHeight??this.shadowSprite.height;return t?t.setTo(this.x-e/2,this.y-s/2,e,s):new Phaser.Geom.Rectangle(this.x-e/2,this.y-s/2,e,s)}}const y=100,it=1500;class Ct extends p.GameObjects.Container{backgroundProgressBar;progressBar;pw;progressWidth;progressHeight;borderRadiusPx;backgroundColor;progressColor;currentProgress;isIndeterminate;indeterminateAnimation;indeterminateAnimationDuration;constructor({scene:t,x:e,y:s,width:i,height:r,backgroundColor:n="gray-200",progressColor:a="blue-500",borderRadius:o="default",progress:h=0,indeterminate:c=!1,indeterminateAnimationDuration:u=it}){super(t,e,s),this.pw=x(t),this.progressWidth=i,this.progressHeight=r,this.backgroundColor=n,this.progressColor=a,this.currentProgress=Math.max(0,Math.min(y,h)),this.isIndeterminate=c,this.indeterminateAnimationDuration=u,this.borderRadiusPx=typeof o=="number"?o:this.pw.radius.px(o),this.createBackgroundSprite(),this.createProgressSprite(),this.setupContainer(),this.isIndeterminate?this.startIndeterminateAnimation():this.updateProgressBar()}setProgress(t,e=!0){if(this.isIndeterminate)return this;const s=Math.max(0,Math.min(y,t));if(this.currentProgress===s)return this;if(e){const i={value:this.currentProgress};this.scene.tweens.add({targets:i,value:s,duration:300,ease:"Power2",onUpdate:()=>{this.currentProgress=i.value,this.updateProgressBar()}})}else this.currentProgress=s,this.updateProgressBar();return this}getProgress(){return this.currentProgress}setIndeterminate(t){return this.isIndeterminate===t?this:(this.isIndeterminate=t,this.isIndeterminate?(this.stopIndeterminateAnimation(),this.startIndeterminateAnimation()):(this.stopIndeterminateAnimation(),this.updateProgressBar()),this)}setBorderRadius(t){const e=typeof t=="number"?t:this.pw.radius.px(t);return this.borderRadiusPx===e?this:(this.borderRadiusPx=e,this.recreateSprites(),this)}setBackgroundColor(t){return this.backgroundColor===t?this:(this.backgroundColor=t,this.recreateSprites(),this)}setProgressColor(t){return this.progressColor===t?this:(this.progressColor=t,this.recreateSprites(),this)}destroy(){this.stopIndeterminateAnimation(),super.destroy()}createBackgroundSprite(){const t=this.scene.add.graphics();t.fillStyle(d.hex(this.backgroundColor),1),t.fillRoundedRect(-this.progressWidth/2,-this.progressHeight/2,this.progressWidth,this.progressHeight,this.getEffectiveBorderRadius()),this.backgroundProgressBar=t}createProgressSprite(){const t=this.scene.add.graphics();t.fillStyle(d.hex(this.progressColor),1),t.fillRoundedRect(-this.progressWidth/2,-this.progressHeight/2,this.progressWidth,this.progressHeight,this.getEffectiveBorderRadius()),this.progressBar=t}setupContainer(){this.add([this.backgroundProgressBar,this.progressBar])}calculateProgressDimensions(){const t=this.progressWidth*this.currentProgress/y,e=(t-this.progressWidth)/2;return{progressWidth:t,leftOffset:e}}updateProgressBar(t=!1){if(this.isIndeterminate&&!t)return;const{progressWidth:e,leftOffset:s}=this.calculateProgressDimensions();this.progressBar.setScale(e/this.progressWidth,1),this.progressBar.setX(s)}startIndeterminateAnimation(){if(!this.isIndeterminate)return;this.currentProgress=40,this.updateProgressBar(!0);const{progressWidth:t}=this.calculateProgressDimensions(),e=this.progressWidth/2-t/2,s=-(this.progressWidth/2)+t/2;this.progressBar.setX(s),this.indeterminateAnimation=this.scene.tweens.add({targets:this.progressBar,x:e,duration:this.indeterminateAnimationDuration,ease:"Sine.easeInOut",yoyo:!0,repeat:-1})}stopIndeterminateAnimation(){this.indeterminateAnimation&&(this.indeterminateAnimation.destroy(),this.indeterminateAnimation=void 0)}recreateSprites(){this.remove([this.backgroundProgressBar,this.progressBar]),this.backgroundProgressBar.destroy(),this.progressBar.destroy(),this.createBackgroundSprite(),this.createProgressSprite(),this.setupContainer(),this.isIndeterminate?this.startIndeterminateAnimation():this.updateProgressBar()}getEffectiveBorderRadius(){const t=Math.min(this.progressWidth,this.progressHeight)/2;return Math.min(this.borderRadiusPx,t)}}const rt=4,nt=.25,B=2,R=.95;class ot extends p.GameObjects.Container{backgroundGraphics;shadowGraphics;headerText;pw;fontSizePx;marginPx;borderRadiusPx;backgroundColorValue;textColorValue;strokeColorValue;fontValue;textValue;constructor({scene:t,x:e,y:s,text:i,fontSize:r,font:n,backgroundColor:a="blue-600",textColor:o="white",strokeColor:h,borderRadius:c="md",margin:u="4"}){super(t,e,s),this.pw=x(t),this.textValue=i,this.fontSizePx=typeof r=="number"?r:this.pw.fontSize.px(r??"lg"),this.marginPx=typeof u=="number"?u:this.pw.spacing.px(u??"4"),this.borderRadiusPx=typeof c=="number"?c:this.pw.radius.px(c??"md"),this.backgroundColorValue=d.rgb(a),this.textColorValue=d.rgb(o),this.strokeColorValue=h?d.rgb(h):this.getDarkerColor(a),this.fontValue=typeof n=="string"?n:this.pw.font.family(n??"display"),this.createHeaderText(t),this.createShadowGraphics(t),this.createBackgroundGraphics(t),this.setupContainer(),this.setupInteractivity()}setText(t){return this.textValue=t,this.headerText.setText(t),this.regenerateGraphics(),this}setFontSize(t){return this.fontSizePx=typeof t=="number"?t:this.pw.fontSize.px(t??"lg"),this.headerText.setFontSize(this.fontSizePx),this.regenerateGraphics(),this}setFont(t){return this.fontValue=typeof t=="string"?t:this.pw.font.family(t??"display"),this.headerText.setFontFamily(this.fontValue),this.regenerateGraphics(),this}setBackgroundColor(t){return this.backgroundColorValue=d.rgb(t),this.strokeColorValue.startsWith("#")||(this.strokeColorValue=this.getDarkerColor(t),this.headerText.setStroke(this.strokeColorValue,B)),this.regenerateGraphics(),this}setTextColor(t){return this.textColorValue=d.rgb(t),this.headerText.setColor(this.textColorValue),this}setStrokeColor(t){return this.strokeColorValue=d.rgb(t),this.headerText.setStroke(this.strokeColorValue,B),this}setBorderRadius(t){return this.borderRadiusPx=typeof t=="number"?t:this.pw.radius.px(t??"md"),this.regenerateGraphics(),this}setMargin(t){return this.marginPx=typeof t=="number"?t:this.pw.spacing.px(t??"4"),this.regenerateGraphics(),this}createHeaderText(t){this.headerText=t.add.text(0,0,this.textValue,{fontSize:`${this.fontSizePx}px`,fontFamily:this.fontValue,color:this.textColorValue,stroke:this.strokeColorValue,strokeThickness:B,fontStyle:"bold"}),this.headerText.setOrigin(.5,.5)}createShadowGraphics(t){this.shadowGraphics=t.add.graphics(),this.drawShadow()}createBackgroundGraphics(t){this.backgroundGraphics=t.add.graphics(),this.drawBackground()}regenerateGraphics(){this.headerText.setText(this.textValue),this.drawShadow(),this.drawBackground()}drawShadow(){const t=this.getHeaderDimensions(),{height:e,width:s}=t;this.shadowGraphics.clear();const i=Math.min(s/2,e/2),r=Math.min(this.borderRadiusPx,i),n=s*R,a=e*R,o=-n/2,h=rt-a/2+4,c=Math.min(n/2,a/2),u=Math.min(r*R,c);this.shadowGraphics.fillStyle(d.hex("black"),nt),this.shadowGraphics.fillRoundedRect(o,h,n,a,u)}drawBackground(){const{width:t,height:e}=this.getHeaderDimensions();this.backgroundGraphics.clear();const s=Math.min(t/2,e/2),i=Math.min(this.borderRadiusPx,s),r=-t/2,n=-e/2;this.backgroundGraphics.fillStyle(d.hex(this.backgroundColorValue),1),this.backgroundGraphics.fillRoundedRect(r,n,t,e,i);const a=.15;let o=t;this.borderRadiusPx>12&&(o=t*.7);const h=r+(t-o)/2,c=Math.max(2,e*a),u=Math.min(i,c/2);this.backgroundGraphics.fillStyle(d.hex("white"),a),this.backgroundGraphics.fillRoundedRect(h,n,o,c,u)}getHeaderDimensions(){const t=this.headerText.getBounds(),e=t.width+this.marginPx*2,s=t.height+this.marginPx*2;return{width:e,height:s}}setupContainer(){this.add([this.shadowGraphics,this.backgroundGraphics,this.headerText])}setupInteractivity(){this.setInteractive(),this.on("pointerdown",()=>{this.setScale(.95),this.on("pointerup",()=>{this.setScale(1)})})}getDarkerColor(t){const e=t;if(e.includes("-")){const[i,r]=e.split("-");if(i&&r){const n=parseInt(r),a=900,o=200;if(!isNaN(n)&&n<a){const h=Math.min(a,n+o);return d.rgb(`${i}-${h}`)}}}return["red","blue","green","yellow","purple","orange","pink","gray"].includes(e)?d.rgb(`${e}-800`):d.rgb("gray-800")}}const ht=8,at=16,E="red-500",ct=60,A=32,H=8;class mt extends p.GameObjects.Container{card;sectionHeader=null;closeButton=null;title;showCloseButton;onClose;headerHeight;constructor(t){super(t.scene,t.x??0,t.y??0),this.title=t.title??"",this.showCloseButton=t.showCloseButton??!1,this.onClose=t.onClose,this.headerHeight=ct,this.card=new W({scene:t.scene,x:0,y:0,backgroundColor:t.backgroundColor??E,borderRadius:t.borderRadius??ht,margin:t.margin??at,child:t.child}),this.add(this.card),this.title&&this.createSectionHeader(),this.showCloseButton&&this.createCloseButton(),this.updateLayout()}createSectionHeader(){this.sectionHeader=new ot({scene:this.scene,x:0,y:0,text:this.title,backgroundColor:E,borderRadius:0}),this.add(this.sectionHeader)}createCloseButton(){this.closeButton=new j({scene:this.scene,x:0,y:0,icon:"x",size:A,onClick:()=>{this.onClose&&this.onClose()}}),this.add(this.closeButton)}updateLayout(){const t=this.card.getBounds();if(this.sectionHeader){const e=-t.height/2+this.headerHeight/2;this.sectionHeader.setPosition(0,e)}if(this.closeButton){const e=t.width/2-A/2-H,s=-t.height/2+A/2+H;this.closeButton.setPosition(e,s)}}setTitle(t){return this.title=t,t&&!this.sectionHeader?this.createSectionHeader():!t&&this.sectionHeader?(this.remove(this.sectionHeader),this.sectionHeader=null):this.sectionHeader&&this.sectionHeader.setText(t),this.updateLayout(),this}setShowCloseButton(t){return this.showCloseButton=t,t&&!this.closeButton?this.createCloseButton():!t&&this.closeButton&&(this.remove(this.closeButton),this.closeButton=null),this.updateLayout(),this}setOnClose(t){return this.onClose=t,this}setBackgroundColor(t){return this.card.setBackgroundColor(t),this.sectionHeader&&this.sectionHeader.setBackgroundColor(t),this}setBorderRadius(t){return this.card.setBorderRadius(t),this.updateLayout(),this}setMargin(t){return this.card.setMargin(t),this.updateLayout(),this}setChild(t){return this.card.setChild(t),this.updateLayout(),this}getCard(){return this.card}getSectionHeader(){return this.sectionHeader}getCloseButton(){return this.closeButton}}const w=100,v=360,dt=270,ut=4,gt=.2,lt="white",pt="base",xt=1;class yt extends p.GameObjects.Container{backgroundProgressBar;progressBar;radialArc;percentageText;pw;radius;thickness;backgroundColor;backgroundAlpha;progressColor;currentProgress;startAngle;showText;textColor;fontSize;textAlpha;constructor({scene:t,x:e,y:s,radius:i,thickness:r=ut,backgroundColor:n="gray-200",backgroundAlpha:a=gt,progressColor:o="blue-500",progress:h=0,startAngle:c=dt,showText:u=!1,textColor:l=lt,fontSize:S=pt,textAlpha:m=xt}){super(t,e,s),this.pw=x(t),this.radius=i,this.thickness=r,this.backgroundColor=n,this.backgroundAlpha=a,this.progressColor=o,this.currentProgress=Math.max(0,Math.min(w,h)),this.startAngle=c,this.showText=u,this.textColor=l,this.fontSize=S,this.textAlpha=m,this.createBackgroundSprite(),this.createRadialArc(),this.showText&&this.createPercentageText(),this.setupContainer(),this.updateProgressBar()}setProgress(t,e=!0){const s=Math.max(0,Math.min(w,t));if(this.currentProgress===s)return this;if(e){const i={value:this.currentProgress};this.scene.tweens.add({targets:i,value:s,duration:300,ease:"Power2",onUpdate:()=>{this.currentProgress=i.value,this.updateProgressBar(),this.updatePercentageText()}})}else this.currentProgress=s,this.updateProgressBar(),this.updatePercentageText();return this}getProgress(){return this.currentProgress}setBackgroundColor(t){return this.backgroundColor===t?this:(this.backgroundColor=t,this.recreateSprites(),this)}setBackgroundAlpha(t){return this.backgroundAlpha===t?this:(this.backgroundAlpha=t,this.recreateSprites(),this)}setProgressColor(t){return this.progressColor===t?this:(this.progressColor=t,this.recreateSprites(),this)}setShowText(t){return this.showText===t?this:(this.showText=t,t&&!this.percentageText?(this.createPercentageText(),this.percentageText&&this.add(this.percentageText)):!t&&this.percentageText&&(this.remove(this.percentageText),this.percentageText.destroy(),this.percentageText=void 0),this)}setTextColor(t){return this.textColor===t?this:(this.textColor=t,this.percentageText&&(this.percentageText.destroy(),this.createPercentageText(),this.add(this.percentageText)),this)}setFontSize(t){return this.fontSize===t?this:(this.fontSize=t,this.percentageText&&(this.percentageText.destroy(),this.createPercentageText(),this.add(this.percentageText)),this)}setTextAlpha(t){return this.textAlpha===t?this:(this.textAlpha=t,this.percentageText&&this.percentageText.setAlpha(this.textAlpha),this)}setRadius(t){return this.radius===t?this:(this.radius=t,this.recreateSprites(),this)}destroy(){super.destroy()}createBackgroundSprite(){const t=this.scene.add.graphics();t.fillStyle(this.pw.color.hex(this.backgroundColor),this.backgroundAlpha),t.beginPath(),t.arc(0,0,this.radius,0,Phaser.Math.PI2,!1),t.closePath(),t.fillPath(),this.backgroundProgressBar=t}createRadialArc(){const t=this.scene.add.graphics();t.lineStyle(this.thickness,this.pw.color.hex(this.progressColor),1),t.beginPath(),t.arc(0,0,this.radius,this.startAngle,Phaser.Math.DegToRad(v),!0),t.strokePath(),this.radialArc=t}createPercentageText(){this.percentageText=this.scene.add.text(0,0,`${Math.round(this.currentProgress)}%`,{fontSize:this.pw.fontSize.css(this.fontSize),color:this.pw.color.rgb(this.textColor),fontStyle:"bold"}),this.percentageText.setOrigin(.5),this.percentageText.setAlpha(this.textAlpha)}setThickness(t){this.thickness=t,this.recreateSprites()}setupContainer(){const t=[this.backgroundProgressBar,this.radialArc];this.percentageText&&t.push(this.percentageText),this.add(t)}updateProgressBar(){if(!this.radialArc)return;this.radialArc.clear();const t=Phaser.Math.DegToRad(this.startAngle),e=Phaser.Math.DegToRad(this.currentProgress/w*v),s=t+e,i=this.currentProgress>=w;this.radialArc.lineStyle(this.thickness,this.pw.color.hex(this.progressColor),1),this.radialArc.beginPath(),i?this.radialArc.arc(0,0,this.radius,0,Phaser.Math.PI2,!1):this.radialArc.arc(0,0,this.radius,t,s,!1),this.radialArc.strokePath()}updatePercentageText(){this.percentageText&&this.percentageText.setText(`${Math.round(this.currentProgress)}%`)}recreateSprites(){const t=[this.backgroundProgressBar,this.radialArc];this.percentageText&&t.push(this.percentageText),this.remove(t),this.backgroundProgressBar.destroy(),this.radialArc.destroy(),this.percentageText&&(this.percentageText.destroy(),this.percentageText=void 0),this.createBackgroundSprite(),this.createRadialArc(),this.showText&&this.createPercentageText(),this.setupContainer(),this.updateProgressBar()}}class Bt extends p.GameObjects.Rectangle{constructor({scene:t,x:e,y:s,width:i=1,height:r=1}){if(i===void 0&&r===void 0)throw new Error("SizedBox must have at least width or height specified");const n=i??1,a=r??1;super(t,e,s,n,a,0,0)}setWidth(t){return this.width=t,this}setHeight(t){return this.height=t,this}setSize(t,e){return this.width=t,this.height=e,this}}const C={click:100,hover:150},M=1.05,St=2,z=4,bt=.15;class Rt extends p.GameObjects.Container{backgroundSprite;shadowSprite;buttonText;pw;fontSizePx;marginPx;borderRadiusPx;backgroundColorValue;textColorValue;fontValue;textValue;constructor({scene:t,x:e,y:s,text:i,fontSize:r="base",font:n,backgroundColor:a="blue",textColor:o="white",borderRadius:h="md",margin:c="4",onClick:u}){super(t,e,s),this.pw=x(t),this.textValue=i,this.fontSizePx=typeof r=="number"?r:this.pw.fontSize.px(r??"md"),this.marginPx=typeof c=="number"?c:this.pw.spacing.px(c??"4"),this.borderRadiusPx=typeof h=="number"?h:this.pw.radius.px(h??"md"),this.backgroundColorValue=d.rgb(a),this.textColorValue=d.rgb(o),this.fontValue=typeof n=="string"?n:this.pw.font.family(n??"primary"),this.createButtonText(t),this.createShadowSprite(t),this.createBackgroundSprite(t),this.setupContainer(),this.setupInteractivity(u)}setText(t){return this.textValue=t,this.buttonText.setText(t),this.regenerateSprites(),this}setFontSize(t){return this.fontSizePx=typeof t=="number"?t:this.pw.fontSize.px(t??"md"),this.buttonText.setFontSize(this.fontSizePx),this.regenerateSprites(),this}setFont(t){return this.fontValue=typeof t=="string"?t:this.pw.font.family(t??"primary"),this.buttonText.setFontFamily(this.fontValue),this.regenerateSprites(),this}setBackgroundColor(t){return this.backgroundColorValue=d.rgb(t),this.regenerateSprites(),this}setTextColor(t){return this.textColorValue=d.rgb(t),this.buttonText.setColor(this.textColorValue),this}setBorderRadius(t){return this.borderRadiusPx=typeof t=="number"?t:this.pw.radius.px(t??"md"),this.regenerateSprites(),this}setMargin(t){return this.marginPx=typeof t=="number"?t:this.pw.spacing.px(t??"4"),this.regenerateSprites(),this}createButtonText(t){this.buttonText=t.add.text(0,0,this.textValue,{fontSize:`${this.fontSizePx}px`,fontFamily:this.fontValue,color:this.textColorValue}),this.buttonText.setOrigin(.5,.5)}createShadowSprite(t){const e=this.createShadowTexture(t);this.shadowSprite=t.add.sprite(0,z,e),this.shadowSprite.setOrigin(.5,.5)}createBackgroundSprite(t){const e=this.createBackgroundTexture(t);this.backgroundSprite=t.add.sprite(0,0,e),this.backgroundSprite.setOrigin(.5,.5)}regenerateSprites(){this.buttonText.setText(this.textValue);const t=this.createShadowTexture(this.scene),e=this.createBackgroundTexture(this.scene);this.shadowSprite.setTexture(t),this.backgroundSprite.setTexture(e)}getButtonDimensions(){const t=this.buttonText.getBounds(),e=t.width+this.marginPx*2,s=t.height+this.marginPx*2;return{width:e,height:s}}createShadowTexture(t){const{width:e,height:s}=this.getButtonDimensions(),i=`textButton_shadow_${this.backgroundColorValue}_${this.borderRadiusPx}_${e}_${s}`,r=8,n=e+r*2,a=s+r*2,o=t.add.graphics(),h=Math.min(e/2,s/2),c=Math.min(this.borderRadiusPx,h);return o.fillStyle(d.hex("black"),bt),o.fillRoundedRect(r,r+z,e,s,c),o.generateTexture(i,n,a),o.destroy(),i}createBackgroundTexture(t){const{width:e,height:s}=this.getButtonDimensions(),i=`textButton_bg_${this.backgroundColorValue}_${this.borderRadiusPx}_${e}_${s}`,r=8,n=e+r*2,a=s+r*2,o=t.add.graphics(),h=Math.min(e/2,s/2),c=Math.min(this.borderRadiusPx,h);return o.fillStyle(d.hex(this.backgroundColorValue),1),o.fillRoundedRect(r,r,e,s,c),o.generateTexture(i,n,a),o.destroy(),i}setupContainer(){this.add([this.shadowSprite,this.backgroundSprite,this.buttonText])}setupInteractivity(t){this.backgroundSprite.setInteractive({useHandCursor:!0}),this.backgroundSprite.on("pointerover",()=>{this.scene.tweens.add({targets:this,scaleX:M,scaleY:M,duration:C.hover,ease:"Back.easeOut"})}),this.backgroundSprite.on("pointerout",()=>{this.scene.tweens.add({targets:this,scaleX:1,scaleY:1,duration:C.hover,ease:"Back.easeOut"})}),this.backgroundSprite.on("pointerdown",()=>{this.scene.tweens.add({targets:[this.backgroundSprite,this.buttonText],y:St,duration:C.click,ease:"Linear"})}),this.backgroundSprite.on("pointerup",()=>{this.scene.tweens.add({targets:[this.backgroundSprite,this.buttonText],y:0,duration:C.click,ease:"Linear"}),t?.()})}get interactive(){const{on:t,off:e,setInteractive:s,once:i}=this.backgroundSprite;return{on:t.bind(this.backgroundSprite),off:e.bind(this.backgroundSprite),setInteractive:s.bind(this.backgroundSprite),once:i.bind(this.backgroundSprite)}}}const At="hudini";class Ot extends p.Plugins.BasePlugin{phaserWindMappingKey=T;constructor(t){super(t)}init({theme:t,darkMode:e=!1,phaserWindMappingKey:s=T}){if(this.phaserWindMappingKey=s,!this.pluginManager.get(T)){const i=t??(e?F:$);this.pluginManager.install(T,L,!0,s,{theme:i,darkMode:e})}}get pw(){return this.pluginManager.get(this.phaserWindMappingKey)}}export{W as C,j as F,Ot as H,wt as I,Ct as L,mt as P,yt as R,Bt as S,Rt as T,At as a,Pt as b,ot as c};
