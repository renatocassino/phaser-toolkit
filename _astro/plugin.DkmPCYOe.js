import{p,P as Z}from"./PhaserGame.astro_astro_type_script_index_0_lang.BEm-lufV.js";import{C as d,g as q,c as J,P as R,b as Q,e as tt,d as et}from"./scene-with-phaser-wind.ChBr0c7d.js";import{I as y}from"./icon-text.Cik5XBWK.js";const S=l=>l.pw;class K extends p.GameObjects.Container{hitArea;constructor({scene:t,x:e,y:i}){super(t,e,i)}on(t,e,i){return this.hitArea?(this.hitArea.on(t,e,i),this):super.on(t,e,i)}off(t,e,i,s){return this.hitArea?(this.hitArea.off(t,e,i,s),this):super.off(t,e,i,s)}once(t,e,i){return this.hitArea?(this.hitArea.once(t,e,i),this):super.once(t,e,i)}setInteractive(t,e,i){return this.hitArea?(this.hitArea.setInteractive(t,e,i),this):super.setInteractive(t,e,i)}setSize(t,e){return this.hitArea&&"setSize"in this.hitArea?(this.hitArea.setSize(t,e),this):super.setSize(t,e)}get width(){return this.hitArea&&"width"in this.hitArea?this.hitArea.width:0}get height(){return this.hitArea&&"height"in this.hitArea?this.hitArea.height:0}set width(t){this.hitArea&&"width"in this.hitArea&&(this.hitArea.width=t)}set height(t){this.hitArea&&"height"in this.hitArea&&(this.hitArea.height=t)}}const it=2,st=2,E=st*2,rt=2;class ot extends K{whiteBorderSprite;backgroundSprite;child;pw;marginPx;borderRadiusPx;backgroundColorValue;hasExplicitSize=!1;constructor({scene:t,x:e,y:i,backgroundColor:s="white",borderRadius:r="md",margin:o="4",child:n,width:h,height:c}){super({scene:t,x:e,y:i}),this.pw=S(t),this.marginPx=typeof o=="number"?o:this.pw.spacing.px(o??"4"),this.borderRadiusPx=typeof r=="number"?r:this.pw.radius.px(r??"md"),this.backgroundColorValue=d.rgb(s),this.child=n,this.hasExplicitSize=h!==void 0&&c!==void 0,this.createWhiteBorderSprite(t),this.createBackgroundSprite(t),this.setupContainer(),this.hitArea=this.backgroundSprite}setSize(t,e){return this.hasExplicitSize=!0,this.width=t,this.height=e,this.regenerateSprites(),this}setWidth(t){return this.setSize(t,this.height),this}setHeight(t){return this.setSize(this.width,t),this}setBackgroundColor(t){return this.backgroundColorValue=d.rgb(t),this.regenerateSprites(),this}setBorderRadius(t){return this.borderRadiusPx=typeof t=="number"?t:this.pw.radius.px(t??"md"),this.regenerateSprites(),this}setMargin(t){return this.marginPx=typeof t=="number"?t:this.pw.spacing.px(t??"4"),this.layout(),this}setChild(t){return this.child&&this.remove(this.child),this.child=t,this.layout(),this}createWhiteBorderSprite(t){const e=this.createWhiteBorderTexture(t);this.whiteBorderSprite=t.add.sprite(0,0,e),this.whiteBorderSprite.setOrigin(.5,.5)}createBackgroundSprite(t){const e=this.createBackgroundTexture(t);this.backgroundSprite=t.add.sprite(0,0,e),this.backgroundSprite.setOrigin(.5,.5)}regenerateSprites(){const t=this.createWhiteBorderTexture(this.scene),e=this.createBackgroundTexture(this.scene);this.whiteBorderSprite.setTexture(t),this.backgroundSprite.setTexture(e)}setupContainer(){this.add([this.whiteBorderSprite,this.backgroundSprite]),this.child&&this.add([this.child]),this.hasExplicitSize||this.layout()}layout(){if(!this.child)return;const t=this.child.getBounds(),e=t.width+this.marginPx*2,i=t.height+this.marginPx*2,s=this.getChildOrigin(),r=this.calculateChildX(e,t.width,s),o=this.calculateChildY(i,t.height,s);this.width=e,this.height=i,this.regenerateSprites(),this.child.setPosition(r,o)}getChildOrigin(){if(this.child&&"originX"in this.child&&"originY"in this.child)return{x:this.child.originX,y:this.child.originY};if(this.child&&typeof this.child.getOrigin=="function"){const t=this.child.getOrigin();if(t&&typeof t.x=="number"&&typeof t.y=="number")return{x:t.x,y:t.y}}return null}calculateChildX(t,e,i){if(this.child&&i){const s=e*i.x;return-t/2+this.marginPx+s}else return-t/2+this.marginPx}calculateChildY(t,e,i){if(i){const s=e*i.y;return-t/2+this.marginPx+s}else return-t/2+this.marginPx}measureChild(t){const e=q(t),i=J(t);return{w:e,h:i}}getCardDimensions(){let t=0,e=0;if(this.hasExplicitSize)t=this.width,e=this.height;else if(this.child){const{w:i,h:s}=this.measureChild(this.child);t=i+this.marginPx*2,e=s+this.marginPx*2}else t=this.width||100,e=this.height||100;return{width:t,height:e}}createWhiteBorderTexture(t){const{width:e,height:i}=this.getCardDimensions(),s=`card_whiteBorder_${this.borderRadiusPx}_${e}_${i}`,r=e+E,o=i+E,n=8,h=r+n*2,c=o+n*2,a=t.add.graphics(),u=Math.floor(Math.min(r/2,o/2)),g=Math.min(this.borderRadiusPx+rt,u),x=Math.max(0,g);return a.fillStyle(d.hex("white"),1),a.fillRoundedRect(n,n,r,o,x),a.generateTexture(s,h,c),a.destroy(),s}createBackgroundTexture(t){const{width:e,height:i}=this.getCardDimensions(),s=`card_bg_${this.backgroundColorValue}_${this.borderRadiusPx}_${e}_${i}`,r=8,o=e+r*2,n=i+r*2,h=t.add.graphics(),c=Math.floor(Math.min(e/2,i/2)),a=Math.min(this.borderRadiusPx,c),u=Math.max(0,a);return h.fillStyle(d.hex(this.backgroundColorValue),1),h.fillRoundedRect(r,r,e,i,u),h.lineStyle(it,d.hex("black"),1),h.strokeRoundedRect(r,r,e,i,u),h.generateTexture(s,o,n),h.destroy(),s}}const nt="spinner",ht="blue",at=60,ct=6e4;class Zt extends p.GameObjects.Container{iconText;pw;rotationSpeed;isSpinning=!0;constructor({scene:t,x:e,y:i,icon:s=nt,size:r,color:o=ht,rotationsPerMinute:n=at}){super(t,e,i),this.pw=S(t),this.rotationSpeed=n;const h=typeof r=="number"?r:this.pw.fontSize.px(r??"md");this.createIconText(t,s,h,o),this.setupContainer(),this.startSpinning()}start(){return this.isSpinning||(this.isSpinning=!0,this.startSpinning()),this}stop(){return this.isSpinning=!1,this.scene.tweens.killTweensOf(this.iconText),this}setRotationsPerMinute(t){return this.rotationSpeed=t,this.isSpinning&&(this.scene.tweens.killTweensOf(this.iconText),this.startSpinning()),this}setIcon(t){return this.iconText.setIcon(t),this}setColor(t){return this.iconText.setStyle({color:this.pw.color.rgb(t)}),this}setSize(t){const e=typeof t=="number"?t:this.pw.fontSize.px(t);return this.iconText.setFontSize(`${e}px`),this}get spinning(){return this.isSpinning}createIconText(t,e,i,s){let r;s==="black"||s==="white"||s.includes("-")?r=s:r=`${s}-500`,this.iconText=new y({scene:t,x:0,y:0,icon:e,size:i,style:{color:this.pw.color.rgb(r)}}),this.iconText.setOrigin(.5,.5)}setupContainer(){this.add([this.iconText])}startSpinning(){if(!this.isSpinning)return;const t=ct/this.rotationSpeed;this.scene.tweens.add({targets:this.iconText,rotation:Math.PI*2,duration:t,ease:"Linear",repeat:-1,onComplete:()=>{this.iconText.rotation=0}})}destroy(){this.stop(),super.destroy()}}const P={click:60,hover:100},T=2.2,A=1.1,I=1.05,O=.95,dt=2,ut=2,H=ut*2,lt=2,gt=3,pt=0,xt=3,St=0,Tt=-1.5,B=.5;class Bt extends p.GameObjects.Container{backgroundSprite;whiteBorderSprite;iconText;pw;baseSizePx;borderRadiusPx;backgroundColorValue;iconColorValue;backgroundOpacityValue=1;iconOpacityValue=1;constructor({scene:t,x:e,y:i,icon:s,iconStyle:r="solid",size:o,backgroundColor:n="gray-600",iconColor:h="white",onClick:c,borderRadius:a="md",backgroundOpacity:u=1,iconOpacity:g=1}){super(t,e,i),this.pw=S(t),this.baseSizePx=typeof o=="number"?o:this.pw.fontSize.px(o??"md"),this.updateSize(),this.borderRadiusPx=typeof a=="number"?a:this.pw.radius.px(a??"md"),this.backgroundColorValue=d.rgb(n),this.iconColorValue=d.rgb(h),this.backgroundOpacityValue=u,this.iconOpacityValue=g,this.createWhiteBorderSprite(t),this.createBackgroundSprite(t),this.createIconText(t,s,r),this.setupContainer(),this.setupInteractivity(c)}setBackgroundColor(t){return this.backgroundColorValue=d.rgb(t),this.regenerateBackgroundTexture(),this}setIconColor(t){return this.iconColorValue=d.rgb(t),this.iconText.setColor(this.iconColorValue),this.iconText.setAlpha(this.iconOpacityValue),this}setBackgroundOpacity(t){return this.backgroundOpacityValue=Math.max(0,Math.min(1,t)),this.backgroundSprite.setAlpha(this.backgroundOpacityValue),this}setIconOpacity(t){return this.iconOpacityValue=Math.max(0,Math.min(1,t)),this.iconText.setAlpha(this.iconOpacityValue),this}setBorderRadius(t){const e=typeof t=="number"?t:this.pw.radius.px(t);if(this.borderRadiusPx===e)return this;this.borderRadiusPx=e;const i=this.createWhiteBorderTexture(this.scene),s=this.createBackgroundTexture(this.scene);return this.whiteBorderSprite.setTexture(i),this.backgroundSprite.setTexture(s),this.backgroundSprite.setAlpha(this.backgroundOpacityValue),this}setIcon(t,e){return this.iconText.setIcon(t,e),this}setButtonSize(t){this.baseSizePx=typeof t=="number"?t:this.pw.fontSize.px(t??"md"),this.iconText.setFontSize(`${this.baseSizePx}px`),this.updateSize();const e=this.createWhiteBorderTexture(this.scene),i=this.createBackgroundTexture(this.scene);return this.whiteBorderSprite.setTexture(e),this.backgroundSprite.setTexture(i),this.backgroundSprite.setAlpha(this.backgroundOpacityValue),this}updateSize(){this.width=this.baseSizePx*T,this.height=this.baseSizePx*T}createWhiteBorderSprite(t){const e=this.createWhiteBorderTexture(t);this.whiteBorderSprite=t.add.sprite(0,0,e),this.whiteBorderSprite.setOrigin(B,B)}createBackgroundSprite(t){const e=this.createBackgroundTexture(t);this.backgroundSprite=t.add.sprite(0,0,e),this.backgroundSprite.setOrigin(B,B),this.backgroundSprite.setAlpha(this.backgroundOpacityValue)}regenerateBackgroundTexture(){const t=this.createWhiteBorderTexture(this.scene),e=this.createBackgroundTexture(this.scene);this.whiteBorderSprite.setTexture(t),this.backgroundSprite.setTexture(e),this.backgroundSprite.setAlpha(this.backgroundOpacityValue)}createWhiteBorderTexture(t){const e=`flatIconButton_whiteBorder_r${this.borderRadiusPx}_${this.baseSizePx}`,i=this.baseSizePx*2+H,s=this.baseSizePx*T+H,r=s/2,o=s/2,n=t.add.graphics(),h=Math.floor(Math.min(i/2,i/2)),c=Math.min(this.borderRadiusPx+lt,h),a=Math.max(0,c);return n.fillStyle(d.hex("white"),1),n.fillRoundedRect(r-i/2,o-i/2,i,i,a),n.generateTexture(e,s,s),n.destroy(),e}createBackgroundTexture(t){const e=this.baseSizePx,i=`flatIconButton_${this.backgroundColorValue}_${this.borderRadiusPx}_${e}`,s=e*T,r=e*A,o=e*A,n=t.add.graphics(),h=e*2,c=Math.floor(Math.min(h/2,h/2)),a=Math.min(this.borderRadiusPx,c),u=Math.max(0,a);return n.fillStyle(d.hex(this.backgroundColorValue),1),n.fillRoundedRect(r-h/2,o-h/2,h,h,u),n.lineStyle(dt,d.hex("black"),1),n.strokeRoundedRect(r-h/2,o-h/2,h,h,u),n.generateTexture(i,s,s),n.destroy(),i}createIconText(t,e,i){const s=d.rgb("black");this.iconText=new y({scene:t,x:0,y:Tt,icon:e,size:this.baseSizePx,style:{color:this.iconColorValue,strokeThickness:gt,stroke:s,shadow:{offsetX:pt,offsetY:xt,color:s,blur:St,stroke:!0,fill:!0}},iconStyle:i}),this.iconText.setAlpha(this.iconOpacityValue),this.iconText.setOrigin(B,B)}setupContainer(){this.add([this.whiteBorderSprite,this.backgroundSprite,this.iconText])}setupInteractivity(t){this.backgroundSprite.setInteractive({useHandCursor:!0}),this.backgroundSprite.on("pointerover",()=>{this.scene.tweens.add({targets:this,duration:P.hover,scaleX:I,scaleY:I,ease:"Back.easeOut"})}),this.backgroundSprite.on("pointerout",()=>{this.scene.tweens.add({targets:this,duration:P.hover,scaleX:1,scaleY:1,ease:"Back.easeOut"})}),this.backgroundSprite.on("pointerdown",()=>{this.scene.tweens.add({targets:[this.whiteBorderSprite,this.backgroundSprite,this.iconText],scaleX:O,scaleY:O,duration:P.click,ease:"Linear"})}),this.backgroundSprite.on("pointerup",()=>{this.scene.tweens.add({targets:[this.whiteBorderSprite,this.backgroundSprite,this.iconText],scaleX:1,scaleY:1,duration:P.click,ease:"Linear"}),t?.()})}get interactive(){const{on:t,off:e,setInteractive:i,once:s}=this.backgroundSprite;return{on:t.bind(this.backgroundSprite),off:e.bind(this.backgroundSprite),setInteractive:i.bind(this.backgroundSprite),once:s.bind(this.backgroundSprite)}}getBounds(t){const e=this.baseSizePx*T,i=this.baseSizePx*T;return t?t.setTo(this.x-e/2,this.y-i/2,e,i):new Phaser.Geom.Rectangle(this.x-e/2,this.y-i/2,e,i)}}const bt=22;class Y extends Phaser.GameObjects.Text{constructor({scene:t,x:e,y:i,text:s,size:r=bt,fontFamily:o="Bebas Neue"}){super(t,e,i,s,{font:`${r}px "${o}"`,color:d.white(),stroke:d.black(),strokeThickness:2,shadow:{offsetX:0,offsetY:3,color:d.black(),blur:0,stroke:!0,fill:!0}})}}const f=(l,t,e)=>{const i=d.rgb(l);if(d.isValidColorToken(l)){const r=l.split("-"),o=parseInt(r[1].toString(),10),c=Math.max(Math.min(o+t,900),100).toString();return d.hex(`${r[0]}-${c}`)}const s=Z.Display.Color.ValueToColor(i);return e===0?s.color:e>0?s.clone().lighten(e).color:s.clone().darken(Math.abs(e)).color},k={click:60,hover:100},C=2.2,M=1.1,D=1.05,W=.95,ft=-100,Rt=30,Pt=2,kt=2,$=kt*2,Ct=2,mt=.6,wt=3,_t=0,yt=3,Et=0,At=-1.5,b=.5;class qt extends p.GameObjects.Container{backgroundSprite;whiteBorderSprite;iconText;pw;baseColor;colorButton;lightColorButton;darkColorButton;sizePx;borderRadiusPx;constructor({scene:t,x:e,y:i,icon:s,size:r,color:o,onClick:n,borderRadius:h}){super(t,e,i),this.pw=S(t);const c=typeof r=="number"?r:this.pw.fontSize.px(r??"md"),a=o??"gray";this.sizePx=c,this.updateSize(),this.baseColor=a,this.colorButton=d.rgb(a),this.lightColorButton=f(a,ft,Rt),this.darkColorButton=d.blackHex(),this.borderRadiusPx=typeof h=="number"?h:this.pw.radius.px(h??"full"),this.createWhiteBorderSprite(t,c,this.borderRadiusPx),this.createBackgroundSprite(t,c,a,this.borderRadiusPx),this.createIconText(t,s,c),this.setupContainer(),this.setupInteractivity(n)}setBorderRadius(t){const e=typeof t=="number"?t:this.pw.radius.px(t);if(this.borderRadiusPx===e)return this;this.borderRadiusPx=e;const i=this.createWhiteBorderTexture(this.scene,this.sizePx,this.borderRadiusPx),s=this.createBackgroundTexture(this.scene,this.sizePx,this.baseColor,this.borderRadiusPx);return this.whiteBorderSprite.setTexture(i),this.backgroundSprite.setTexture(s),this}setButtonSize(t){this.sizePx=typeof t=="number"?t:this.pw.fontSize.px(t??"md"),this.iconText.setFontSize(`${this.sizePx}px`),this.updateSize();const e=this.createWhiteBorderTexture(this.scene,this.sizePx,this.borderRadiusPx),i=this.createBackgroundTexture(this.scene,this.sizePx,this.baseColor,this.borderRadiusPx);return this.whiteBorderSprite.setTexture(e),this.backgroundSprite.setTexture(i),this}updateSize(){this.setSize(this.sizePx*C,this.sizePx*C)}createWhiteBorderSprite(t,e,i){const s=this.createWhiteBorderTexture(t,e,i);this.whiteBorderSprite=t.add.sprite(0,0,s),this.whiteBorderSprite.setOrigin(b,b)}createBackgroundSprite(t,e,i,s){const r=this.createBackgroundTexture(t,e,i,s);this.backgroundSprite=t.add.sprite(0,0,r),this.backgroundSprite.setOrigin(b,b)}createWhiteBorderTexture(t,e,i){const s=`iconButton_whiteBorder_r${i}_${e}`,r=e*2+$,o=e*C+$,n=o/2,h=o/2,c=t.add.graphics(),a=Math.floor(Math.min(r/2,r/2)),u=Math.min(i+Ct,a),g=Math.max(0,u);return c.fillStyle(d.hex("white"),1),c.fillRoundedRect(n-r/2,h-r/2,r,r,g),c.generateTexture(s,o,o),c.destroy(),s}createBackgroundTexture(t,e,i,s){const r=`iconButton_r${s}_${i}_${e}`,o=e*C,n=e*M,h=e*M,c=t.add.graphics(),a=e*2,u=Math.floor(Math.min(a/2,a/2)),g=Math.min(s,u),x=Math.max(0,g);return this.drawCssColorGradient(c,n,h,a,x),c.generateTexture(r,o,o),c.destroy(),r}drawCssColorGradient(t,e,i,s,r){t.fillStyle(d.hex(this.colorButton),1),t.fillRoundedRect(e-s/2,i-s/2,s,s,r);const o=s*mt,n=Math.min(r,o/2);t.fillStyle(this.lightColorButton,1),t.fillRoundedRect(e-o/2,i-o/2,o,o,n),t.lineStyle(Pt,d.hex("black"),1),t.strokeRoundedRect(e-s/2,i-s/2,s,s,r)}createIconText(t,e,i){const s=Phaser.Display.Color.ValueToColor(this.darkColorButton),r=255,h=`rgb(${s.color32>>16&r}, ${s.color32>>8&r}, ${s.color32&r})`;this.iconText=new y({scene:t,x:0,y:At,icon:e,size:i,style:{color:d.rgb("white"),strokeThickness:wt,stroke:h,shadow:{offsetX:_t,offsetY:yt,color:h,blur:Et,stroke:!0,fill:!0}}}),this.iconText.setFontStyle("900"),this.iconText.setOrigin(b,b)}setupContainer(){this.add([this.whiteBorderSprite,this.backgroundSprite,this.iconText])}setupInteractivity(t){this.backgroundSprite.setInteractive({useHandCursor:!0}),this.backgroundSprite.on("pointerover",()=>{this.scene.tweens.add({targets:this,duration:k.hover,scaleX:D,scaleY:D,ease:"Back.easeOut"})}),this.backgroundSprite.on("pointerout",()=>{this.scene.tweens.add({targets:this,duration:k.hover,scaleX:1,scaleY:1,ease:"Back.easeOut"})}),this.backgroundSprite.on("pointerdown",()=>{this.scene.tweens.add({targets:[this.whiteBorderSprite,this.backgroundSprite,this.iconText],scaleX:W,scaleY:W,duration:k.click,ease:"Linear"})}),this.backgroundSprite.on("pointerup",()=>{this.scene.tweens.add({targets:[this.whiteBorderSprite,this.backgroundSprite,this.iconText],scaleX:1,scaleY:1,duration:k.click,ease:"Linear"}),t?.()})}get interactive(){const{on:t,off:e,setInteractive:i,once:s}=this.backgroundSprite;return{on:t.bind(this.backgroundSprite),off:e.bind(this.backgroundSprite),setInteractive:i.bind(this.backgroundSprite),once:s.bind(this.backgroundSprite)}}getBounds(t){const e=this.backgroundSprite.displayWidth??this.backgroundSprite.width,i=this.backgroundSprite.displayHeight??this.backgroundSprite.height;return t?t.setTo(this.x-e/2,this.y-i/2,e,i):new Phaser.Geom.Rectangle(this.x-e/2,this.y-i/2,e,i)}}const w=100,It=1500;class Jt extends p.GameObjects.Container{backgroundProgressBar;progressBar;pw;progressWidth;progressHeight;borderRadiusPx;backgroundColor;progressColor;currentProgress;isIndeterminate;indeterminateAnimation;indeterminateAnimationDuration;constructor({scene:t,x:e,y:i,width:s,height:r,backgroundColor:o="gray-200",progressColor:n="blue-500",borderRadius:h="default",progress:c=0,indeterminate:a=!1,indeterminateAnimationDuration:u=It}){super(t,e,i),this.pw=S(t),this.progressWidth=s,this.progressHeight=r,this.backgroundColor=o,this.progressColor=n,this.currentProgress=Math.max(0,Math.min(w,c)),this.isIndeterminate=a,this.indeterminateAnimationDuration=u,this.borderRadiusPx=typeof h=="number"?h:this.pw.radius.px(h),this.createBackgroundSprite(),this.createProgressSprite(),this.setupContainer(),this.isIndeterminate?this.startIndeterminateAnimation():this.updateProgressBar()}setProgress(t,e=!0){if(this.isIndeterminate)return this;const i=Math.max(0,Math.min(w,t));if(this.currentProgress===i)return this;if(e){const s={value:this.currentProgress};this.scene.tweens.add({targets:s,value:i,duration:300,ease:"Power2",onUpdate:()=>{this.currentProgress=s.value,this.updateProgressBar()}})}else this.currentProgress=i,this.updateProgressBar();return this}getProgress(){return this.currentProgress}setIndeterminate(t){return this.isIndeterminate===t?this:(this.isIndeterminate=t,this.isIndeterminate?(this.stopIndeterminateAnimation(),this.startIndeterminateAnimation()):(this.stopIndeterminateAnimation(),this.updateProgressBar()),this)}setBorderRadius(t){const e=typeof t=="number"?t:this.pw.radius.px(t);return this.borderRadiusPx===e?this:(this.borderRadiusPx=e,this.recreateSprites(),this)}setBackgroundColor(t){return this.backgroundColor===t?this:(this.backgroundColor=t,this.recreateSprites(),this)}setProgressColor(t){return this.progressColor===t?this:(this.progressColor=t,this.recreateSprites(),this)}destroy(){this.stopIndeterminateAnimation(),super.destroy()}createBackgroundSprite(){const t=this.scene.add.graphics();t.fillStyle(d.hex(this.backgroundColor),1),t.fillRoundedRect(-this.progressWidth/2,-this.progressHeight/2,this.progressWidth,this.progressHeight,this.getEffectiveBorderRadius()),this.backgroundProgressBar=t}createProgressSprite(){const t=this.scene.add.graphics();t.fillStyle(d.hex(this.progressColor),1),t.fillRoundedRect(-this.progressWidth/2,-this.progressHeight/2,this.progressWidth,this.progressHeight,this.getEffectiveBorderRadius()),this.progressBar=t}setupContainer(){this.add([this.backgroundProgressBar,this.progressBar])}calculateProgressDimensions(){const t=this.progressWidth*this.currentProgress/w,e=(t-this.progressWidth)/2;return{progressWidth:t,leftOffset:e}}updateProgressBar(t=!1){if(this.isIndeterminate&&!t)return;const{progressWidth:e,leftOffset:i}=this.calculateProgressDimensions();this.progressBar.setScale(e/this.progressWidth,1),this.progressBar.setX(i)}startIndeterminateAnimation(){if(!this.isIndeterminate)return;this.currentProgress=40,this.updateProgressBar(!0);const{progressWidth:t}=this.calculateProgressDimensions(),e=this.progressWidth/2-t/2,i=-(this.progressWidth/2)+t/2;this.progressBar.setX(i),this.indeterminateAnimation=this.scene.tweens.add({targets:this.progressBar,x:e,duration:this.indeterminateAnimationDuration,ease:"Sine.easeInOut",yoyo:!0,repeat:-1})}stopIndeterminateAnimation(){this.indeterminateAnimation&&(this.indeterminateAnimation.destroy(),this.indeterminateAnimation=void 0)}recreateSprites(){this.remove([this.backgroundProgressBar,this.progressBar]),this.backgroundProgressBar.destroy(),this.progressBar.destroy(),this.createBackgroundSprite(),this.createProgressSprite(),this.setupContainer(),this.isIndeterminate?this.startIndeterminateAnimation():this.updateProgressBar()}getEffectiveBorderRadius(){const t=Math.min(this.progressWidth,this.progressHeight)/2;return Math.min(this.borderRadiusPx,t)}}const Ot=2,Ht=2,L=Ht*2,Mt=2,F=-100,z=100,N=30,v=-30;class Dt extends K{whiteBorderSprite;backgroundSprite;headerText;pw;fontSizePx;marginPx;borderRadiusPx;colorButton;lightColorButton;darkColorButton;textColorValue;fontFamily;textValue;constructor({scene:t,x:e,y:i,text:s,fontSize:r,font:o,backgroundColor:n="blue-600",textColor:h="white",borderRadius:c="md",margin:a="4"}){super({scene:t,x:e,y:i}),this.pw=S(t),this.textValue=s,this.fontSizePx=typeof r=="number"?r:this.pw.fontSize.px(r??"lg"),this.marginPx=typeof a=="number"?a:this.pw.spacing.px(a??"4"),this.borderRadiusPx=typeof c=="number"?c:this.pw.radius.px(c??"md"),this.colorButton=d.rgb(n),this.lightColorButton=f(n,F,N),this.darkColorButton=f(n,z,v),this.textColorValue=d.rgb(h),this.fontFamily=o?typeof o=="string"?o:this.pw.font.family(o):"Bebas Neue",this.createHeaderText(t),this.createWhiteBorderSprite(t),this.createBackgroundSprite(t),this.setupContainer(),this.hitArea=this.backgroundSprite}setText(t){return this.textValue=t,this.headerText.setText(t),this.regenerateGraphics(),this}setFontSize(t){return this.fontSizePx=typeof t=="number"?t:this.pw.fontSize.px(t??"lg"),this.headerText.setFontSize(this.fontSizePx),this.regenerateGraphics(),this}setFont(t){return this.fontFamily=t?typeof t=="string"?t:this.pw.font.family(t):"Bebas Neue",this.headerText.setFontFamily(this.fontFamily),this.regenerateGraphics(),this}setBackgroundColor(t){return this.colorButton=d.rgb(t),this.lightColorButton=f(t,F,N),this.darkColorButton=f(t,z,v),this.regenerateGraphics(),this}setTextColor(t){return this.textColorValue=d.rgb(t),this.headerText.setColor(this.textColorValue),this}setBorderRadius(t){return this.borderRadiusPx=typeof t=="number"?t:this.pw.radius.px(t??"md"),this.regenerateGraphics(),this}setMargin(t){return this.marginPx=typeof t=="number"?t:this.pw.spacing.px(t??"4"),this.regenerateGraphics(),this}createHeaderText(t){this.headerText=new Y({scene:t,x:0,y:0,text:this.textValue,size:this.fontSizePx,fontFamily:this.fontFamily}),this.headerText.setOrigin(.5,.5)}createWhiteBorderSprite(t){const e=this.createWhiteBorderTexture(t);this.whiteBorderSprite=t.add.sprite(0,0,e),this.whiteBorderSprite.setOrigin(.5,.5)}createBackgroundSprite(t){const e=this.createBackgroundTexture(t);this.backgroundSprite=t.add.sprite(0,0,e),this.backgroundSprite.setOrigin(.5,.5)}regenerateGraphics(){this.headerText.setText(this.textValue);const t=this.createWhiteBorderTexture(this.scene),e=this.createBackgroundTexture(this.scene);this.whiteBorderSprite.setTexture(t),this.backgroundSprite.setTexture(e)}createWhiteBorderTexture(t){const{width:e,height:i}=this.getHeaderDimensions(),s=`sectionHeader_whiteBorder_${this.borderRadiusPx}_${e}_${i}`,r=e+L,o=i+L,n=8,h=r+n*2,c=o+n*2,a=t.add.graphics(),u=Math.floor(Math.min(r/2,o/2)),g=Math.min(this.borderRadiusPx+Mt,u),x=Math.max(0,g);return a.fillStyle(d.hex("white"),1),a.fillRoundedRect(n,n,r,o,x),a.generateTexture(s,h,c),a.destroy(),s}createBackgroundTexture(t){const{width:e,height:i}=this.getHeaderDimensions(),s=`sectionHeader_bg_${this.colorButton}_${this.borderRadiusPx}_${e}_${i}`,r=8,o=e+r*2,n=i+r*2,h=t.add.graphics(),c=Math.floor(Math.min(e/2,i/2)),a=Math.min(this.borderRadiusPx,c),u=Math.max(0,a);return this.drawCssColorGradient(h,r,e,i,u),h.generateTexture(s,o,n),h.destroy(),s}drawCssColorGradient(t,e,i,s,r){t.fillStyle(d.hex(this.colorButton),1),t.fillRoundedRect(e,e,i,s,r);const n=s*.15,h=Math.min(r,n/2);t.fillStyle(this.lightColorButton,1),t.fillRoundedRect(e,e,i,n,h);const c=Math.min(r,n/2);t.fillStyle(this.darkColorButton,1),t.fillRoundedRect(e,e+s-n,i,n,c),t.lineStyle(Ot,d.hex("black"),1),t.strokeRoundedRect(e,e,i,s,r)}getHeaderDimensions(){const t=this.headerText.getBounds(),e=t.width+this.marginPx*2,i=t.height+this.marginPx*2;return{width:e,height:i}}setupContainer(){this.add([this.whiteBorderSprite,this.backgroundSprite,this.headerText])}}const Wt=8,$t=16,V="red-500",_=18,X=8;class Qt extends p.GameObjects.Container{card;sectionHeader=null;closeButton=null;title;showCloseButton;onClose;constructor(t){super(t.scene,t.x??0,t.y??0),this.title=t.title??"",this.showCloseButton=t.showCloseButton??!1,this.onClose=t.onClose,this.card=new ot({scene:t.scene,x:0,y:0,backgroundColor:t.backgroundColor??V,borderRadius:t.borderRadius??Wt,margin:t.margin??$t,child:t.child}),this.add(this.card),this.title&&this.createSectionHeader(),this.showCloseButton&&this.createCloseButton(),this.updateLayout()}createSectionHeader(){this.sectionHeader=new Dt({scene:this.scene,x:0,y:0,text:this.title,backgroundColor:V,borderRadius:0}),this.add(this.sectionHeader)}createCloseButton(){this.closeButton=new Bt({scene:this.scene,x:0,y:0,icon:"x",size:_,onClick:()=>{this.onClose&&this.onClose()}}),this.add(this.closeButton)}updateLayout(){const t={width:this.card.width,height:this.card.height};if(this.sectionHeader){const i=-t.height/2-this.sectionHeader.height/4;this.sectionHeader.setPosition(0,i)}if(this.closeButton){const e=t.width/2-_/2+X,i=-t.height/2+_/2-X;this.closeButton.setPosition(e,i)}}setTitle(t){return this.title=t,t&&!this.sectionHeader?this.createSectionHeader():!t&&this.sectionHeader?(this.remove(this.sectionHeader),this.sectionHeader=null):this.sectionHeader&&this.sectionHeader.setText(t),this.updateLayout(),this}setShowCloseButton(t){return this.showCloseButton=t,t&&!this.closeButton?this.createCloseButton():!t&&this.closeButton&&(this.remove(this.closeButton),this.closeButton=null),this.updateLayout(),this}setOnClose(t){return this.onClose=t,this}setBackgroundColor(t){return this.card.setBackgroundColor(t),this.sectionHeader&&this.sectionHeader.setBackgroundColor(t),this}setBorderRadius(t){return this.card.setBorderRadius(t),this.updateLayout(),this}setMargin(t){return this.card.setMargin(t),this.updateLayout(),this}setChild(t){return this.card.setChild(t),this.updateLayout(),this}getCard(){return this.card}getSectionHeader(){return this.sectionHeader}getCloseButton(){return this.closeButton}}const m=100,G=360,Lt=270,Ft=4,zt=.2,Nt="white",vt="base",Vt=1;class te extends p.GameObjects.Container{backgroundProgressBar;progressBar;radialArc;percentageText;pw;radius;thickness;backgroundColor;backgroundAlpha;progressColor;currentProgress;startAngle;showText;textColor;fontSize;textAlpha;constructor({scene:t,x:e,y:i,radius:s,thickness:r=Ft,backgroundColor:o="gray-200",backgroundAlpha:n=zt,progressColor:h="blue-500",progress:c=0,startAngle:a=Lt,showText:u=!1,textColor:g=Nt,fontSize:x=vt,textAlpha:j=Vt}){super(t,e,i),this.pw=S(t),this.radius=s,this.thickness=r,this.backgroundColor=o,this.backgroundAlpha=n,this.progressColor=h,this.currentProgress=Math.max(0,Math.min(m,c)),this.startAngle=a,this.showText=u,this.textColor=g,this.fontSize=x,this.textAlpha=j,this.createBackgroundSprite(),this.createRadialArc(),this.showText&&this.createPercentageText(),this.setupContainer(),this.updateProgressBar()}setProgress(t,e=!0){const i=Math.max(0,Math.min(m,t));if(this.currentProgress===i)return this;if(e){const s={value:this.currentProgress};this.scene.tweens.add({targets:s,value:i,duration:300,ease:"Power2",onUpdate:()=>{this.currentProgress=s.value,this.updateProgressBar(),this.updatePercentageText()}})}else this.currentProgress=i,this.updateProgressBar(),this.updatePercentageText();return this}getProgress(){return this.currentProgress}setBackgroundColor(t){return this.backgroundColor===t?this:(this.backgroundColor=t,this.recreateSprites(),this)}setBackgroundAlpha(t){return this.backgroundAlpha===t?this:(this.backgroundAlpha=t,this.recreateSprites(),this)}setProgressColor(t){return this.progressColor===t?this:(this.progressColor=t,this.recreateSprites(),this)}setShowText(t){return this.showText===t?this:(this.showText=t,t&&!this.percentageText?(this.createPercentageText(),this.percentageText&&this.add(this.percentageText)):!t&&this.percentageText&&(this.remove(this.percentageText),this.percentageText.destroy(),this.percentageText=void 0),this)}setTextColor(t){return this.textColor===t?this:(this.textColor=t,this.percentageText&&(this.percentageText.destroy(),this.createPercentageText(),this.add(this.percentageText)),this)}setFontSize(t){return this.fontSize===t?this:(this.fontSize=t,this.percentageText&&(this.percentageText.destroy(),this.createPercentageText(),this.add(this.percentageText)),this)}setTextAlpha(t){return this.textAlpha===t?this:(this.textAlpha=t,this.percentageText&&this.percentageText.setAlpha(this.textAlpha),this)}setRadius(t){return this.radius===t?this:(this.radius=t,this.recreateSprites(),this)}destroy(){super.destroy()}createBackgroundSprite(){const t=this.scene.add.graphics();t.fillStyle(this.pw.color.hex(this.backgroundColor),this.backgroundAlpha),t.beginPath(),t.arc(0,0,this.radius,0,Phaser.Math.PI2,!1),t.closePath(),t.fillPath(),this.backgroundProgressBar=t}createRadialArc(){const t=this.scene.add.graphics();t.lineStyle(this.thickness,this.pw.color.hex(this.progressColor),1),t.beginPath(),t.arc(0,0,this.radius,this.startAngle,Phaser.Math.DegToRad(G),!0),t.strokePath(),this.radialArc=t}createPercentageText(){this.percentageText=this.scene.add.text(0,0,`${Math.round(this.currentProgress)}%`,{fontSize:this.pw.fontSize.css(this.fontSize),color:this.pw.color.rgb(this.textColor),fontStyle:"bold"}),this.percentageText.setOrigin(.5),this.percentageText.setAlpha(this.textAlpha)}setThickness(t){this.thickness=t,this.recreateSprites()}setupContainer(){const t=[this.backgroundProgressBar,this.radialArc];this.percentageText&&t.push(this.percentageText),this.add(t)}updateProgressBar(){if(!this.radialArc)return;this.radialArc.clear();const t=Phaser.Math.DegToRad(this.startAngle),e=Phaser.Math.DegToRad(this.currentProgress/m*G),i=t+e,s=this.currentProgress>=m;this.radialArc.lineStyle(this.thickness,this.pw.color.hex(this.progressColor),1),this.radialArc.beginPath(),s?this.radialArc.arc(0,0,this.radius,0,Phaser.Math.PI2,!1):this.radialArc.arc(0,0,this.radius,t,i,!1),this.radialArc.strokePath()}updatePercentageText(){this.percentageText&&this.percentageText.setText(`${Math.round(this.currentProgress)}%`)}recreateSprites(){const t=[this.backgroundProgressBar,this.radialArc];this.percentageText&&t.push(this.percentageText),this.remove(t),this.backgroundProgressBar.destroy(),this.radialArc.destroy(),this.percentageText&&(this.percentageText.destroy(),this.percentageText=void 0),this.createBackgroundSprite(),this.createRadialArc(),this.showText&&this.createPercentageText(),this.setupContainer(),this.updateProgressBar()}}const Xt=2,Gt=2,U=Gt*2,Ut=2;class ee extends p.GameObjects.Container{whiteBorderSprite;backgroundSprite;headerText;pw;fontSizePx;marginPx;borderRadiusPx;colorButton;textColorValue;fontFamily;textValue;constructor({scene:t,x:e,y:i,text:s,fontSize:r,font:o,backgroundColor:n="blue-600",textColor:h="white",borderRadius:c="md",margin:a="4"}){super(t,e,i),this.pw=S(t),this.textValue=s,this.fontSizePx=typeof r=="number"?r:this.pw.fontSize.px(r??"lg"),this.marginPx=typeof a=="number"?a:this.pw.spacing.px(a??"4"),this.borderRadiusPx=typeof c=="number"?c:this.pw.radius.px(c??"md"),this.colorButton=d.rgb(n),this.textColorValue=d.rgb(h),this.fontFamily=o?typeof o=="string"?o:this.pw.font.family(o):"Bebas Neue",this.createHeaderText(t),this.createWhiteBorderSprite(t),this.createBackgroundSprite(t),this.setupContainer(),this.setupInteractivity()}setText(t){return this.textValue=t,this.headerText.setText(t),this.regenerateGraphics(),this}setFontSize(t){return this.fontSizePx=typeof t=="number"?t:this.pw.fontSize.px(t??"lg"),this.headerText.setFontSize(this.fontSizePx),this.regenerateGraphics(),this}setFont(t){return this.fontFamily=t?typeof t=="string"?t:this.pw.font.family(t):"Bebas Neue",this.headerText.setFontFamily(this.fontFamily),this.regenerateGraphics(),this}setBackgroundColor(t){return this.colorButton=d.rgb(t),this.regenerateGraphics(),this}setTextColor(t){return this.textColorValue=d.rgb(t),this.headerText.setColor(this.textColorValue),this}setBorderRadius(t){return this.borderRadiusPx=typeof t=="number"?t:this.pw.radius.px(t??"md"),this.regenerateGraphics(),this}setMargin(t){return this.marginPx=typeof t=="number"?t:this.pw.spacing.px(t??"4"),this.regenerateGraphics(),this}createHeaderText(t){this.headerText=new Y({scene:t,x:0,y:0,text:this.textValue,size:this.fontSizePx,fontFamily:this.fontFamily}),this.headerText.setOrigin(.5,.5)}createWhiteBorderSprite(t){const e=this.createWhiteBorderTexture(t);this.whiteBorderSprite=t.add.sprite(0,0,e),this.whiteBorderSprite.setOrigin(.5,.5)}createBackgroundSprite(t){const e=this.createBackgroundTexture(t);this.backgroundSprite=t.add.sprite(0,0,e),this.backgroundSprite.setOrigin(.5,.5)}regenerateGraphics(){this.headerText.setText(this.textValue);const t=this.createWhiteBorderTexture(this.scene),e=this.createBackgroundTexture(this.scene);this.whiteBorderSprite.setTexture(t),this.backgroundSprite.setTexture(e)}createWhiteBorderTexture(t){const{width:e,height:i}=this.getHeaderDimensions(),s=`flatSectionHeader_whiteBorder_${this.borderRadiusPx}_${e}_${i}`,r=e+U,o=i+U,n=8,h=r+n*2,c=o+n*2,a=t.add.graphics(),u=Math.floor(Math.min(r/2,o/2)),g=Math.min(this.borderRadiusPx+Ut,u),x=Math.max(0,g);return a.fillStyle(d.hex("white"),1),a.fillRoundedRect(n,n,r,o,x),a.generateTexture(s,h,c),a.destroy(),s}createBackgroundTexture(t){const{width:e,height:i}=this.getHeaderDimensions(),s=`flatSectionHeader_bg_${this.colorButton}_${this.borderRadiusPx}_${e}_${i}`,r=8,o=e+r*2,n=i+r*2,h=t.add.graphics(),c=Math.floor(Math.min(e/2,i/2)),a=Math.min(this.borderRadiusPx,c),u=Math.max(0,a);return h.fillStyle(d.hex(this.colorButton),1),h.fillRoundedRect(r,r,e,i,u),h.lineStyle(Xt,d.hex("black"),1),h.strokeRoundedRect(r,r,e,i,u),h.generateTexture(s,o,n),h.destroy(),s}getHeaderDimensions(){const t=this.headerText.getBounds(),e=t.width+this.marginPx*2,i=t.height+this.marginPx*2;return{width:e,height:i}}setupContainer(){this.add([this.whiteBorderSprite,this.backgroundSprite,this.headerText])}setupInteractivity(){this.setInteractive(),this.on("pointerdown",()=>{this.setScale(.95),this.on("pointerup",()=>{this.setScale(1)})})}}class ie extends p.GameObjects.Rectangle{constructor({scene:t,x:e,y:i,width:s=1,height:r=1}){if(s===void 0&&r===void 0)throw new Error("SizedBox must have at least width or height specified");const o=s??1,n=r??1;super(t,e,i,o,n,0,0)}setWidth(t){return this.width=t,this}setHeight(t){return this.height=t,this}setSize(t,e){return this.width=t,this.height=e,this}}const se="hudini";class re extends p.Plugins.BasePlugin{phaserWindMappingKey=R;constructor(t){super(t)}init({theme:t,darkMode:e=!1,phaserWindMappingKey:i=R}){if(this.phaserWindMappingKey=i,!this.pluginManager.get(R)){const s=t??(e?tt:et);this.pluginManager.install(R,Q,!0,i,{theme:s,darkMode:e})}}get pw(){return this.pluginManager.get(this.phaserWindMappingKey)}}export{ot as C,Bt as F,re as H,qt as I,Jt as L,Qt as P,te as R,ie as S,Y as T,se as a,Zt as b,ee as c,Dt as d,K as e,f,S as g};
