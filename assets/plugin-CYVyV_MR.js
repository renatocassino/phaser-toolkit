import{I as b}from"./webfontloader-C-GoOI0N.js";import{p as l,C as g,e as S,f as B,h as E,d as A}from"./create-game-B21kOgm7.js";const f=d=>d.pw,z="spinner",V="blue",L=2,N=1e3;class U extends l.GameObjects.Container{iconText;pw;rotationSpeed;isSpinning=!0;constructor({scene:t,x:e,y:i,icon:s=z,size:o,color:h=V,rotationsPerSecond:n=L}){super(t,e,i),this.pw=f(t),this.rotationSpeed=n;const r=typeof o=="number"?o:this.pw.fontSize.px(o??"md");this.createIconText(t,s,r,h),this.setupContainer(),this.startSpinning()}start(){return this.isSpinning||(this.isSpinning=!0,this.startSpinning()),this}stop(){return this.isSpinning=!1,this.scene.tweens.killTweensOf(this.iconText),this}setRotationsPerSecond(t){return this.rotationSpeed=t,this.isSpinning&&(this.scene.tweens.killTweensOf(this.iconText),this.startSpinning()),this}setIcon(t){return this.iconText.setIcon(t),this}setColor(t){return this.iconText.setStyle({color:this.pw.color.rgb(t)}),this}setSize(t){const e=typeof t=="number"?t:this.pw.fontSize.px(t);return this.iconText.setFontSize(`${e}px`),this}get spinning(){return this.isSpinning}createIconText(t,e,i,s){this.iconText=new b({scene:t,x:0,y:0,icon:e,size:i,style:{color:g.rgb(s)}}),this.iconText.setOrigin(.5,.5)}setupContainer(){this.add([this.iconText])}startSpinning(){if(!this.isSpinning)return;const t=N/this.rotationSpeed;this.scene.tweens.add({targets:this.iconText,rotation:Math.PI*2,duration:t,ease:"Linear",repeat:-1,onComplete:()=>{this.iconText.rotation=0}})}destroy(){this.stop(),super.destroy()}}const I=8,O=d=>{const t=d;if(typeof t.displayWidth=="number")return t.displayWidth;if(typeof t.width=="number")return t.width;const e=t.getBounds?.();return e?e.width:0},k=d=>{const t=d;if(typeof t.displayHeight=="number")return t.displayHeight;if(typeof t.height=="number")return t.height;const e=t.getBounds?.();return e?e.height:0},_=d=>{const t=O(d),e=k(d),i=d;let s=typeof i.originX=="number"?i.originX:void 0,o=typeof i.originY=="number"?i.originY:void 0;return s===void 0&&typeof i.displayOriginX=="number"&&t>0&&(s=i.displayOriginX/t),o===void 0&&typeof i.displayOriginY=="number"&&e>0&&(o=i.displayOriginY/e),{x:s??.5,y:o??.5}};class j extends l.GameObjects.Container{gap;align;verticalOrigin;constructor({scene:t,x:e,y:i,gap:s=I,align:o="center",children:h=[],verticalOrigin:n="top"}){super(t,e,i),this.gap=s,this.align=o,this.verticalOrigin=n,h.length>0&&this.add(h),this.layout()}setGap(t){this.gap=t,this.layout()}setAlign(t){this.align=t,this.layout()}addChild(t,e=!0){return this.add(t),e&&this.layout(),this}addChildren(t,e=!0){return t.length>0&&this.add(t),e&&this.layout(),this}layout(){const t=this.list;if(t.length===0){this.setSize(0,0);return}const e=t.map(n=>({child:n,width:this.getDisplayWidth(n),height:this.getDisplayHeight(n),origin:this.getNormalizedOrigin(n)})),i=e.reduce((n,r)=>Math.max(n,r.width),0),s=e.reduce((n,r)=>n+r.height,0)+this.gap*(e.length-1);let h=this.verticalOrigin==="top"?0:this.verticalOrigin==="center"?-s/2:-s;for(const{child:n,width:r,height:a,origin:c}of e){let u=0;this.align==="left"?u=-i/2+c.x*r:this.align==="right"?u=i/2-(1-c.x)*r:u=(c.x-.5)*r;const p=h+c.y*a;n.setPosition(u,p),h+=a+this.gap}this.setSize(i,s)}getDisplayWidth(t){return O(t)}getDisplayHeight(t){return k(t)}getNormalizedOrigin(t){return _(t)}}const y={click:100,hover:150},w=2.2,x=1.1,D=4,F=.1,$=.9,H=.7,v=1.07,m=2,M=.9,Y=.7;class q extends l.GameObjects.Container{backgroundSprite;shadowSprite;iconText;pw;baseColor;sizePx;borderRadiusPx;constructor({scene:t,x:e,y:i,icon:s,size:o,color:h,onClick:n,borderRadius:r}){super(t,e,i),this.pw=f(t);const a=typeof o=="number"?o:this.pw.fontSize.px(o??"md"),c=h??"gray";this.sizePx=a,this.baseColor=c,this.borderRadiusPx=typeof r=="number"?r:this.pw.radius.px(r??"full"),this.createShadowSprite(t,a,c,this.borderRadiusPx),this.createBackgroundSprite(t,a,c,this.borderRadiusPx),this.createIconText(t,s,a,c),this.setupContainer(),this.setupInteractivity(n)}setBorderRadius(t){const e=typeof t=="number"?t:this.pw.radius.px(t);if(this.borderRadiusPx===e)return this;this.borderRadiusPx=e;const i=this.createShadowTexture(this.scene,this.sizePx,this.baseColor,this.borderRadiusPx),s=this.createBackgroundTexture(this.scene,this.sizePx,this.baseColor,this.borderRadiusPx);return this.shadowSprite.setTexture(i),this.backgroundSprite.setTexture(s),this}setButtonSize(t){this.sizePx=typeof t=="number"?t:this.pw.fontSize.px(t??"md"),this.iconText.setFontSize(`${this.sizePx}px`);const e=this.createShadowTexture(this.scene,this.sizePx,this.baseColor,this.borderRadiusPx),i=this.createBackgroundTexture(this.scene,this.sizePx,this.baseColor,this.borderRadiusPx);return this.shadowSprite.setTexture(e),this.backgroundSprite.setTexture(i),this}createShadowSprite(t,e,i,s){const o=this.createShadowTexture(t,e,i,s);this.shadowSprite=t.add.sprite(1,D,o),this.shadowSprite.setOrigin(.5,.5)}createShadowTexture(t,e,i,s){const o=`iconButton_shadow_r${s}_${i}_${e}`,h=e*w,n=e*x,r=e*x,a=t.add.graphics(),c=e*2*x,u=e*2,p=Math.min(s,c/2),T=Math.min(s,u/2);return a.fillStyle(g.hex("black"),F),a.fillRoundedRect(n+1-c/2,r-c/2,c,c,p),a.fillStyle(g.hex(`${i}-900`),$),a.fillRoundedRect(n-u/2,r-m-u/2,u,u,T),a.generateTexture(o,h,h),a.destroy(),o}createBackgroundSprite(t,e,i,s){const o=this.createBackgroundTexture(t,e,i,s);this.backgroundSprite=t.add.sprite(1,0,o),this.backgroundSprite.setOrigin(.5,.5)}createBackgroundTexture(t,e,i,s){const o=`iconButton_r${s}_${i}_${e}`,h=e*w,n=e*x,r=e*x,a=t.add.graphics(),c=e*2,u=c*M,p=c*Y,T=Math.min(s,u/2),R=Math.min(s,p/2);return a.fillStyle(g.hex(`${i}-600`),1),a.fillRoundedRect(n-u/2,r-u/2,u,u,T),a.fillStyle(g.hex(`${i}-500`),H),a.fillRoundedRect(n-p/2,r-p/2,p,p,R),a.generateTexture(o,h,h),a.destroy(),o}createIconText(t,e,i,s){this.iconText=new b({scene:t,x:1,y:1,icon:e,size:i,style:{color:g.rgb("white"),strokeThickness:3,stroke:g.rgb(`${s}-900`)}}),this.iconText.setFontStyle("900"),this.iconText.setOrigin(.5,.5)}setupContainer(){this.add([this.shadowSprite,this.backgroundSprite,this.iconText])}setupInteractivity(t){this.backgroundSprite.setInteractive({useHandCursor:!0}),this.backgroundSprite.on("pointerover",()=>{this.scene.tweens.add({targets:this.iconText,scale:v,duration:y.hover,ease:"Linear"})}),this.backgroundSprite.on("pointerout",()=>{this.scene.tweens.add({targets:this.iconText,scale:1,duration:y.hover,ease:"Linear"})}),this.backgroundSprite.on("pointerdown",()=>{this.scene.tweens.add({targets:[this.backgroundSprite,this.iconText],y:m,duration:y.click,ease:"Linear"})}),this.backgroundSprite.on("pointerup",()=>{this.scene.tweens.add({targets:[this.backgroundSprite,this.iconText],y:0,duration:y.click,ease:"Linear"}),t?.()})}}const C={click:100},W=2,K=2.2,P=1.1;class J extends l.GameObjects.Container{backgroundSprite;iconText;pw;baseSizePx;borderRadiusPx;backgroundColorValue;iconColorValue;backgroundOpacityValue=1;iconOpacityValue=1;constructor({scene:t,x:e,y:i,icon:s,iconStyle:o="solid",size:h,backgroundColor:n="gray-600",iconColor:r="white",onClick:a,borderRadius:c="md",backgroundOpacity:u=1,iconOpacity:p=1}){super(t,e,i),this.pw=f(t),this.baseSizePx=typeof h=="number"?h:this.pw.fontSize.px(h??"md"),this.borderRadiusPx=typeof c=="number"?c:this.pw.radius.px(c??"md"),this.backgroundColorValue=g.rgb(n),this.iconColorValue=g.rgb(r),this.backgroundOpacityValue=u,this.iconOpacityValue=p,this.createBackgroundSprite(t),this.createIconText(t,s,o),this.setupContainer(),this.setupInteractivity(a)}setBackgroundColor(t){return this.backgroundColorValue=g.rgb(t),this.regenerateBackgroundTexture(),this}setIconColor(t){return this.iconColorValue=g.rgb(t),this.iconText.setColor(this.iconColorValue),this.iconText.setAlpha(this.iconOpacityValue),this}setBackgroundOpacity(t){return this.backgroundOpacityValue=Math.max(0,Math.min(1,t)),this.backgroundSprite.setAlpha(this.backgroundOpacityValue),this}setIconOpacity(t){return this.iconOpacityValue=Math.max(0,Math.min(1,t)),this.iconText.setAlpha(this.iconOpacityValue),this}setBorderRadius(t){const e=typeof t=="number"?t:this.pw.radius.px(t);return this.borderRadiusPx===e?this:(this.borderRadiusPx=e,this.regenerateBackgroundTexture(),this)}setIcon(t,e){return this.iconText.setIcon(t,e),this}setButtonSize(t){return this.baseSizePx=typeof t=="number"?t:this.pw.fontSize.px(t??"md"),this.iconText.setFontSize(`${this.baseSizePx}px`),this.regenerateBackgroundTexture(),this}createBackgroundSprite(t){const e=this.createBackgroundTexture(t);this.backgroundSprite=t.add.sprite(0,0,e),this.backgroundSprite.setOrigin(.5,.5),this.backgroundSprite.setAlpha(this.backgroundOpacityValue)}regenerateBackgroundTexture(){const t=this.createBackgroundTexture(this.scene);this.backgroundSprite.setTexture(t),this.backgroundSprite.setAlpha(this.backgroundOpacityValue)}createBackgroundTexture(t){const e=this.baseSizePx,i=`flatIconButton_${this.backgroundColorValue}_${this.borderRadiusPx}_${e}`,s=e*K,o=e*P,h=e*P,n=t.add.graphics();n.fillStyle(g.hex(this.backgroundColorValue),1);const r=e*2,a=Math.min(this.borderRadiusPx,r/2);return n.fillRoundedRect(o-r/2,h-r/2,r,r,a),n.generateTexture(i,s,s),n.destroy(),i}createIconText(t,e,i){this.iconText=new b({scene:t,x:0,y:0,icon:e,size:this.baseSizePx,style:{color:this.iconColorValue,strokeThickness:0},iconStyle:i}),this.iconText.setAlpha(this.iconOpacityValue),this.iconText.setOrigin(.5,.5)}setupContainer(){this.add([this.backgroundSprite,this.iconText])}setupInteractivity(t){this.backgroundSprite.setInteractive({useHandCursor:!0}),this.backgroundSprite.on("pointerdown",()=>{this.scene.tweens.add({targets:[this.backgroundSprite,this.iconText],y:W,duration:C.click,ease:"Linear"})}),this.backgroundSprite.on("pointerup",()=>{this.scene.tweens.add({targets:[this.backgroundSprite,this.iconText],y:0,duration:C.click,ease:"Linear"}),t?.()})}}class Q extends l.GameObjects.Container{gap;align;horizontalOrigin;constructor({scene:t,x:e,y:i,gap:s=I,align:o="center",children:h=[],horizontalOrigin:n="center"}){super(t,e,i),this.gap=s,this.align=o,this.horizontalOrigin=n,h.length>0&&this.add(h),this.layout()}setGap(t){this.gap=t,this.layout()}setAlign(t){this.align=t,this.layout()}addChild(t,e=!0){return this.add(t),e&&this.layout(),this}addChildren(t,e=!0){return t.length>0&&this.add(t),e&&this.layout(),this}layout(){const t=this.list;if(t.length===0){this.setSize(0,0);return}const e=t.map(n=>({child:n,width:this.getDisplayWidth(n),height:this.getDisplayHeight(n),origin:this.getNormalizedOrigin(n)})),i=e.reduce((n,r)=>Math.max(n,r.height),0),s=e.reduce((n,r)=>n+r.width,0)+this.gap*(e.length-1);let h=this.horizontalOrigin==="left"?0:this.horizontalOrigin==="center"?-s/2:-s;for(const{child:n,width:r,height:a,origin:c}of e){let u=0;this.align==="top"?u=-i/2+c.y*a:this.align==="bottom"?u=i/2-(1-c.y)*a:u=(c.y-.5)*a;const p=h+c.x*r;n.setPosition(p,u),h+=r+this.gap}this.setSize(s,i)}getDisplayWidth(t){return O(t)}getDisplayHeight(t){return k(t)}getNormalizedOrigin(t){return _(t)}}const Z="hudini";class tt extends l.Plugins.BasePlugin{phaserWindMappingKey=S;constructor(t){super(t)}init({theme:t,darkMode:e=!1,phaserWindMappingKey:i=S}){if(this.phaserWindMappingKey=i,!this.pluginManager.get(S)){const s=t??(e?E:A);this.pluginManager.install(S,B,!0,i,{theme:s,darkMode:e})}}get pw(){return this.pluginManager.get(this.phaserWindMappingKey)}}export{U as C,J as F,Z as H,q as I,Q as R,tt as a,j as b};
